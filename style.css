html,
body {
    height: 100%;
    margin: 0;
    overflow: hidden;
}

body {
    display: flex;
    justify-content: center;

    --tile-size: 32px;
    /* —Ä–∞–∑–º–µ—Ä —Ç–∞–π–ª–∞ */
    --frame: 64px;
    /* —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –∫–∞–¥—Ä–∞ */
    --cols: 6;
    --rows: 4;

    /* —Å–ø—Ä–∞–π—Ç –∞—Ç–∞–∫–∏ */
    --a-cols: 8;
    --a-duration: 360ms;

    --h-cols: 5;

    --e-cols: 11;
}

/*  –ö–∞–º–µ—Ä–∞  */
.viewport {
    position: fixed;
    inset: 0;
    overflow: hidden;/
}

.field {
    display: grid;
    grid-template-columns: repeat(40, var(--tile-size));
    grid-template-rows: repeat(24, var(--tile-size));
    will-change: transform;
    margin: 0;
    border: 0;
}

.field:focus {
    outline: none;
}

.tile {
    position: relative;
    width: var(--tile-size);
    height: var(--tile-size);
    box-sizing: border-box;
    contain: paint;
    will-change: contents;
    background-repeat: no-repeat;
}

.tile.floor {
    background-image: url('Tilesets/FieldsTile_01.png');
    /* background-color: #4d5f95;
    box-shadow: inset 2px 2px 3px rgba(0, 0, 0, 0.2), -2px -2px 5px rgba(187, 190, 236, 0.2), inset 2px 2px 5px rgba(0, 0, 0, 0.2); */
}

.tile.wall {
    color: #B6B2CF;
    /* background-image: url('Tilesets/Wall.png'); */
    background-color: #555;
    box-shadow: -2px -2px 3px rgba(19, 2, 31, 0.259), inset 2px 2px 5px rgba(253, 253, 253, 0.2), -2px -2px 8px rgba(19, 2, 31, 0.259);
}

.creature,
.item {
    position: absolute;
    pointer-events: none;
    backface-visibility: hidden;
    transform: translateZ(0);
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 25;
}

/* –ü—Ä–µ–¥–º–µ—Ç—ã (—ç–º–æ–¥–∑–∏) */
/* .health::before {
    content: '‚ù§Ô∏è';
   
} */
.health {
    left: 4px;
    top: 4px;
    background-image: url('Tilesets/elixir.png');
    background-repeat: no-repeat;
}

/* .sword::before {
    content: '‚öîÔ∏è';
} */

.sword {
    left: 4px;
    top: 4px;
    background-image: url('Tilesets/sword16.png');
    background-repeat: no-repeat;
}

/* .enemy::before {
    content: 'üíÄ';
} */

.creature.player {
    z-index: 26;
}

.hud {
    position: fixed;
    top: 10px;
    left: 10px;
    right: 10px;
    max-width: 220px;
    padding: 10px 12px;
    background: #584c6db4;
    color: #fff;
    font: 14px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    border-radius: 5px;
    /* backdrop-filter: blur(2px); */
    z-index: 9999;
}

.hud-row {
    display: grid;
    grid-template-columns: 36px 1fr auto;
    gap: 8px;
    align-items: center;
    margin-top: 6px;
}

.hud-row:first-child {
    margin-top: 0;
}

.hud-label {
    opacity: 0.85;
}

.hud-bar {
    height: 10px;
    background: #333;
    border-radius: 6px;
    overflow: hidden;
}

.hud-fill {
    height: 100%;
    width: 100%;
    background: #00ff04;
    transition: width 360ms linear;
}

.hud.hud--dead {
    opacity: 0.75;
    filter: grayscale(0.2);
}

/*  –ü–æ–ª–æ—Å–∫–∏ HP –Ω–∞–¥ —Å—É—â–µ—Å—Ç–≤–∞–º–∏  */
.hpbar {
    position: absolute;
    left: 2px;
    right: 2px;
    top: 0px;
    height: 5px;
    background: rgba(0, 0, 0, 0.35);
    border-radius: 4px;
    overflow: hidden;
    z-index: 30;
    pointer-events: none;
}

.hpbar-fill {
    height: 100%;
    width: 100%;
    background: #3bd16f;
    transition: width 120ms linear;
}

.tile.wall .hpbar {
    display: none;
}

.creature.enemy~.hpbar .hpbar-fill {
    background: #ff7a57;
}


.tile .hpbar {
    display: none;
}

/* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ */
.tile .creature~.hpbar {
    display: block;
}


.creature.player::after {
    content: "";
    position: absolute;
    left: 50%;
    top: 50%;
    width: var(--frame);
    /* —Ä–∏—Å—É–µ–º –∫–∞–¥—Ä –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ 64√ó64 */
    height: var(--frame);
    transform: translate(-50%, -50%);
    image-rendering: pixelated;
    background-image: url('Tilesets/With_shadow/Swordsman_lvl3_Walk_with_shadow.png');
    background-repeat: no-repeat;
    background-size: calc(var(--cols) * var(--frame)) calc(var(--rows) * var(--frame));
    background-position: 0 0;
    clip-path: inset(var(--trim));
    /* –æ—Ç—Ä–µ–∑–∞–µ–º –ø–æ–ª—è –ø–æ 16px ‚Üí –≤–∏–¥–∏–º—ã–µ 32√ó32 –ø–æ —Ü–µ–Ω—Ç—Ä—É */

}


.player.dir-down::after {
    background-position-y: 0px;
}

.player.dir-left::after {
    background-position-y: -64px;
}

.player.dir-right::after {
    background-position-y: -128px;
}

.player.dir-up::after {
    background-position-y: -192px;
}


@keyframes attack {
    from {
        background-position-x: 0px;
    }

    to {
        background-position-x: calc(-1 * var(--a-cols) * var(--frame));
    }
}

.player.attack::after {
    background-image: url('Tilesets/With_shadow/Swordsman_lvl3_attack_with_shadow.png');
    background-position-x: 0px;
    background-size: calc(var(--a-cols) * var(--frame)) calc(var(--rows) * var(--frame));
    animation: attack var(--a-duration) steps(var(--a-cols)) 1;
}

@keyframes hurt {
    from {
        background-position-x: 0px;
    }

    to {
        background-position-x: calc(-1 * var(--h-cols) * var(--frame));
    }
}

.player.hurt::after {
    background-image: url('Tilesets/With_shadow/Swordsman_lvl3_Hurt_with_shadow.png');
    background-position-x: 0px;
    background-size: calc(var(--h-cols) * var(--frame)) calc(var(--rows) * var(--frame));
    animation: hurt 240ms steps(var(--h-cols)) 1;
    ;
}



.creature.player:not(.attack)::after {
    background-position-x: 0px;
}

.creature.enemy::after {
    content: "";
    position: absolute;
    left: 50%;
    top: 50%;
    width: var(--frame);
    height: var(--frame);
    transform: translate(-50%, -50%);
    image-rendering: pixelated;
    background-image: url('Tilesets/Slime2_Walk_full.png');
    background-repeat: no-repeat;
    background-size: calc(1 * var(--frame)) calc(var(--rows) * var(--frame));
    background-position: 0 0;
    clip-path: inset(var(--trim));
}

.enemy.attack.dir-down::after {
    background-position-y: 0px;
}

.enemy.attack.dir-up::after {
    background-position-y: -64px;
}

.enemy.attack.dir-left::after {
    background-position-y: -128px;
}

.enemy.attack.dir-right::after {
    background-position-y: -192px;
}

@keyframes attackEnemy {
    from {
        background-position-x: 0px;
    }

    to {
        background-position-x: calc(-1 * var(--e-cols) * var(--frame));
    }
}

.enemy.attack::after {
    background-image: url('Tilesets/slime/Slime2_Attack_full.png');
    background-position-x: 0px;
    background-size: calc(var(--e-cols) * var(--frame)) calc(var(--rows) * var(--frame));
    animation: attackEnemy var(--a-duration) steps(var(--e-cols)) 1;
}

.creature.enemy:not(.attack)::after {
    background-position-x: 0;
}

#infoDiolog {
    top: 50%;
    transform: translate(0%, -50%);
    border: none;
    text-align: center;
    color: #ffffff;
    background: #584c6d7a;
    color: #fff;
    font: 14px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    border-radius: 5px;
    backdrop-filter: blur(6px);
    border: none;
}

#infoDiolog:focus {
    outline: none;
}